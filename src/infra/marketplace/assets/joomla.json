{
    "name": "Joomla",
    "type": "app",
    "description": "Build and grow your website with the best way to WordPress. Lightning-fast hosting, intuitive, flexible editing, and everything you need to grow your site and audience, baked right in.",
    "serviceNames": ["php", "mysql"],
    "mappings": [
        {
            "path": "/",
            "matchPattern": "begins-with",
            "targetType": "service",
            "targetServiceName": "php"
        }
    ],
    "dataFields": [
        {
            "name": "adminMailAddress",
            "label": "Admin Email",
            "type": "email",
            "isRequired": true
        }
    ],
    "cmdSteps": [
        "wget -O /app/joomla.zip https://downloads.joomla.org/cms/joomla5/5-1-0/Joomla_5-1-0-Stable-Full_Package.zip?format=zip",
        "mkdir /app/joomla && unzip /app/joomla.zip -d /app/joomla && rm -rf /app/joomla.zip",
        "sos db create -n joomlaDb_%installUuid% -t mysql",
        "echo $(openssl rand -hex 8) > %installDirectory%/joomlaDbCredentials",
        "sos db create-user -n joomlaDb_%installUuid% -t mysql -u joomlaUser_%installUuid% -p $(cat %installDirectory%/joomlaDbCredentials) -r all",
        "sos runtime php update -v 82 -S allow_url_fopen -V on",
        "php /app/joomla/installation/joomla.php install --site-name=baseWebsite --admin-user=joomlaUser_%installUuid% --admin-username=joomlaUser_%installUuid% --admin-password=$(cat %installDirectory%/joomlaDbCredentials) --admin-email=%adminMailAddress% --db-type=mysqli --db-host=localhost --db-user=joomlaUser_%installUuid% --db-pass=$(cat %installDirectory%/joomlaDbCredentials) --db-name=joomlaDb_%installUuid% --db-prefix=joomla_ --db-encryption=0 --public-folder=%installDirectory%",
        "rm -rf %installDirectory%/joomlaDbCredentials && rm -rf %installDirectory% && ln -s /app/joomla %installDirectory%"
    ],
    "estimatedSizeBytes": 450000000,
    "avatarUrl": "https://speedia.net/assets/os/marketplace/joomla/joomla-avatar.jpg",
    "screenshotUrls": [
        "https://speedia.net/assets/os/marketplace/joomla/joomla-1.jpg",
        "https://speedia.net/assets/os/marketplace/joomla/joomla-2.jpg",
        "https://speedia.net/assets/os/marketplace/joomla/joomla-3.jpg"
    ]
}