{
    "slugs": ["om", "openmage"],
    "name": "OpenMage",
    "type": "app",
    "description": "OpenMage is a stable and secure e-commerce platform. OpenMage LTS allows merchants already using an e-commerce site under Magento 1 to continue using a secure and stable Magento platform while remaining PCI compliant.",
    "services": ["php:8.2", "mariadb"],
    "mappings": [
      {
        "path": "/",
        "matchPattern": "begins-with",
        "targetType": "service",
        "targetValue": "php"
      }
    ],
    "dataFields": [
        {
          "name": "locale",
          "label": "OpenMage Language",
          "type": "text",
          "defaultValue": "en_US",
          "options": ["en_US", "pt_BR", "pt_PT", "es_ES", "de_DE", "it_IT", "fr_FR"]
        },
        {
          "name": "timezone",
          "label": "OpenMage Timezone",
          "type": "text",
          "defaultValue": "America/Los_Angeles",
          "options": [
            "America/Los_Angeles",
            "America/New_York",
            "America/Sao_Paulo",
            "Europe/Lisbon",
            "Europe/Madrid",
            "Europe/Berlin",
            "Europe/Rome",
            "Europe/Paris"
          ]
        },
        {
          "name": "currency",
          "label": "OpenMage Default Currency",
          "type": "text",
          "defaultValue": "USD",
          "options": ["USD", "BRL", "EUR"]
        },
        {
          "name": "adminUsername",
          "label": "Admin Username",
          "type": "text",
          "isRequired": true
        },
        {
          "name": "adminPassword",
          "label": "Admin Password",
          "type": "password",
          "isRequired": true
        },
        {
          "name": "adminMailAddress",
          "label": "Admin Email",
          "type": "email",
          "isRequired": true
        },
        {
          "name": "adminFirstName",
          "label": "Admin First Name",
          "type": "text",
          "isRequired": true
        },
        {
          "name": "adminLastName",
          "label": "Admin Last Name",
          "type": "text",
          "isRequired": true
        }
      ],
    "installCmdSteps": [
        "curl -skL -o /app/composer-setup.php https://getcomposer.org/installer",
        "php /app/composer-setup.php --install-dir=/usr/local/bin --filename=composer",
        "rm -rf /app/composer-setup.php",
        "os runtime php update -n %installHostname% -v 8.2",
        "os vhost mapping create -n matheus.os -p / -t service -v php",
        "composer init --name=openmage/openmage -d %installDirectory% -n -q",
        "composer config --json extra.enable-patching true -f %installDirectory%/composer.json -q",
        "composer config extra.magento-core-package-type magento-source -f %installDirectory%/composer.json -q",
        "composer config extra.magento-root-dir %installDirectory% -f %installDirectory%/composer.json -q",
        "composer config --no-plugins allow-plugins.aydin-hassan/magento-core-composer-installer true -f %installDirectory%/composer.json -q",
        "composer config --no-plugins allow-plugins.magento-hackathon/magento-composer-installer true -f %installDirectory%/composer.json -q",
        "composer config --no-plugins allow-plugins.cweagans/composer-patches true -f %installDirectory%/composer.json -q",
        "composer require \"aydin-hassan/magento-core-composer-installer\":\"^2.1.0\" -d %installDirectory% -q",
        "composer require \"openmage/magento-lts\":\"^20.0.0\" -d %installDirectory% -q",
        "cd %installDirectory%; composer dump-autoload --optimize ",
        "chown -R nobody:nogroup %installDirectory%",
        "os db create -n omDb_%installUuid% -t mysql",
        "os db create-user -n omDb_%installUuid% -t mysql -u omUser_%installUuid% -p %installRandomPassword% -r all",
        "php %installDirectory%/install.php --license_agreement_accepted yes --locale %locale% --timezone %timezone% --default_currency %currency% --db_host localhost --db_name omDb_%installUuid% --db_user omUser_%installUuid% --db_pass %installRandomPassword% --url http://%installHostname%/ --use_rewrites no --use_secure yes --secure_base_url https://%installHostname%/ --use_secure_admin yes --admin_lastname %adminLastName% --admin_firstname %adminFirstName% --admin_email %adminMailAddress% --admin_username %adminUsername% --admin_password %adminPassword%"
    ],
    "uninstallCmdSteps": [
      "os db delete-user -n omDb_%installUuid% -t mysql -u omUser_%installUuid%",
      "os db delete -n omDb_%installUuid% -t mysql"
    ],
    "uninstallFileNames": [
      "app",
      "errors",
      "js",
      "lib",
      "media",
      "pub",
      "shell",
      "skin",
      "var",
      "vendor",
      ".gitignore",
      ".htaccess",
      "*.php",
      "LICENSE*",
      "composer.*",
      "cron.sh",
      "favicon.ico",
      "*.sample"
    ],
    "estimatedSizeBytes": 288000,
    "avatarUrl": "https://avatars.githubusercontent.com/u/57708",
    "screenshotUrls": [
      "https://www.openmage.org/assets/images/gallery/images/summary-report-section.jpg",
      "https://www.openmage.org/assets/images/gallery/images/orders.jpg",
      "https://www.openmage.org/assets/images/gallery/images/visual-skin-and-layouts.jpg"
    ]
  }
  