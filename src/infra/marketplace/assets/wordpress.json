{
    "name": "WordPress",
    "type": "app",
    "description": "Build and grow your website with the best way to WordPress. Lightning-fast hosting, intuitive, flexible editing, and everything you need to grow your site and audience, baked right in.",
    "serviceNames": ["php", "mysql"],
    "mappings": [
        {
            "path": "/",
            "matchPattern": "begins-with",
            "targetType": "service",
            "targetServiceName": "php"
        }
    ],
    "dataFields": [
        {
            "name": "locale",
            "label": "locale",
            "type": "text",
            "defaultValue": "en_US",
            "options": [
                "en_US",
                "pt_BR",
                "pt_PT",
                "es_ES",
                "de_DE",
                "it_IT",
                "fr_FR"
            ]
        },
        {
            "name": "adminUsername",
            "label": "adminUser",
            "type": "text",
            "isRequired": true
        },
        {
            "name": "adminPassword",
            "label": "adminPass",
            "type": "password",
            "isRequired": true
        },
        {
            "name": "adminMailAddress",
            "label": "adminMail",
            "type": "email",
            "isRequired": true
        }
    ],
    "cmdSteps": [
        "wget -O %installDirectory%/wp-cli.phar https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar",
        "chmod +x %installDirectory%/wp-cli.phar",
        "mv %installDirectory%/wp-cli.phar /usr/local/bin/wp",
        "wp core download --path=%installDirectory% --locale=%locale% --allow-root",
        "sos db create -n wpDb_%installUuid% -t mysql",
        "echo $(openssl rand -hex 8) > %installDirectory%/wpDbCredentials",
        "sos db create-user -n wpDb_%installUuid% -t mysql -u wpUser_%installUuid% -p $(cat %installDirectory%/wpDbCredentials) -r all",
        "wp config create --path=%installDirectory% --dbname=wpDb_%installUuid% --dbuser=wpUser_%installUuid% --dbpass=$(cat %installDirectory%/wpDbCredentials) --allow-root",
        "rm -rf %installDirectory%/wpDbCredentials",
        "wp core install --path=%installDirectory% --locale=%locale% --url=%installHostname% --title=%adminTitle% --admin_user=%adminUsername% --admin_password=%adminPassword% --admin_email=%adminMailAddress% --allow-root"
    ],
    "estimatedSizeBytes": 1000000000,
    "avatarUrl": "https://speedia.net/assets/os/marketplace/wordpress/wp-avatar.jpg",
    "screenshotUrls": [
        "https://speedia.net/assets/os/marketplace/wordpress/wp-dashboard.jpg",
        "https://speedia.net/assets/os/marketplace/wordpress/wp-themes.jpg",
        "https://speedia.net/assets/os/marketplace/wordpress/wp-front-1.jpg",
        "https://speedia.net/assets/os/marketplace/wordpress/wp-front-2.jpg",
        "https://speedia.net/assets/os/marketplace/wordpress/wp-front-3.jpg"
    ]
}