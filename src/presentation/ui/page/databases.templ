package page

import (
	"github.com/speedianet/os/src/domain/valueObject"
	componentStructural "github.com/speedianet/os/src/presentation/ui/component/structural"
	presenterDto "github.com/speedianet/os/src/presentation/ui/presenter/dto"
)

script DatabasesIndexLocalState() {
    document.addEventListener('alpine:init', () => {
		Alpine.data('databases', () => ({
			// Primary states
			database: {},
			databaseUser: {},
			resetPrimaryStates() {
				this.database = {
					'name': '',
					'type': '',
					'size': ''
				}
				this.databaseUser = {
					'username': '',
					'dbName': '',
					'dbType': '',
					'privileges': []
				}
			},
			init() {
				this.resetPrimaryStates();
			},

			// Auxiliary states

			// Modal states
		}))
	})
}

templ DatabasesIndex(databaseTypeDetails presenterDto.DatabaseTypeDetails) {
	@DatabasesIndexLocalState()
	<div class="flex flex-col" x-data="databases">
		<div class="mb-6 flex flex-row items-center justify-between">
			<div class="basis-[70%]">
				@componentStructural.PageTitle(
					"Databases",
					"",
					"ph-database",
				)
			</div>
		</div>
		<div id="databases-tabs" class="card w-full">
			@DatabasesTabs(databaseTypeDetails)
		</div>
	</div>
}

templ DatabasesTabs(databaseTypeDetails presenterDto.DatabaseTypeDetails) {
	@componentStructural.Tab(valueObject.GetDatabaseTypes(), databaseTypeDetails.Type.String())
	<div id="databases-table" class="bg-os-800 p-4 rounded-b-xl rounded-r-xl">
		<!-- DatabasesFormTable -->
	</div>
}
